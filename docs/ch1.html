<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Introduction to the R Environment | Introduction to R for Natural Resource Scientists</title>
  <meta name="description" content="This is a first course in R programming for natural resource scientists. It was developed and has been primarily instructed at Auburn University." />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Introduction to the R Environment | Introduction to R for Natural Resource Scientists" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a first course in R programming for natural resource scientists. It was developed and has been primarily instructed at Auburn University." />
  <meta name="github-repo" content="bstaton1/au-r-workshop" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Introduction to the R Environment | Introduction to R for Natural Resource Scientists" />
  
  <meta name="twitter:description" content="This is a first course in R programming for natural resource scientists. It was developed and has been primarily instructed at Auburn University." />
  

<meta name="author" content="Ben Staton" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="ch2.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.2/leaflet.js"></script>
<script src="libs/leaflet-providers-1.1.17/leaflet-providers.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.2/leaflet-providers-plugin.js"></script>
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Intro to R for Nat. Res. Sci.</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-is-covered"><i class="fa fa-check"></i>What is Covered?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#comp-prep"><i class="fa fa-check"></i>Prepare Your Computer</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#notation"><i class="fa fa-check"></i>Text Conventions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#keyboard-shortcuts"><i class="fa fa-check"></i>Keyboard Shortcuts</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#development-of-this-book"><i class="fa fa-check"></i>Development of this Book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-author"><i class="fa fa-check"></i>About the Author</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="ch1.html"><a href="ch1.html"><i class="fa fa-check"></i><b>1</b> Introduction to the R Environment</a><ul>
<li class="chapter" data-level="" data-path="ch1.html"><a href="ch1.html#chapter-overview"><i class="fa fa-check"></i>Chapter Overview</a></li>
<li class="chapter" data-level="" data-path="ch1.html"><a href="ch1.html#before-you-begin"><i class="fa fa-check"></i>Before You Begin</a></li>
<li class="chapter" data-level="1.1" data-path="ch1.html"><a href="ch1.html#the-r-studio-interface"><i class="fa fa-check"></i><b>1.1</b> The R Studio Interface</a><ul>
<li class="chapter" data-level="1.1.1" data-path="ch1.html"><a href="ch1.html#write-some-simple-code"><i class="fa fa-check"></i><b>1.1.1</b> Write Some Simple Code</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="ch1.html"><a href="ch1.html#scripts"><i class="fa fa-check"></i><b>1.2</b> Saving Your Code: Scripts</a></li>
<li class="chapter" data-level="1.3" data-path="ch1.html"><a href="ch1.html#working-dir"><i class="fa fa-check"></i><b>1.3</b> The Working Directory</a></li>
<li class="chapter" data-level="1.4" data-path="ch1.html"><a href="ch1.html#r-object-types"><i class="fa fa-check"></i><b>1.4</b> R Object Types</a><ul>
<li class="chapter" data-level="1.4.1" data-path="ch1.html"><a href="ch1.html#functions"><i class="fa fa-check"></i><b>1.4.1</b> Functions</a></li>
<li class="chapter" data-level="1.4.2" data-path="ch1.html"><a href="ch1.html#vectors"><i class="fa fa-check"></i><b>1.4.2</b> Vectors</a></li>
<li class="chapter" data-level="1.4.3" data-path="ch1.html"><a href="ch1.html#matrices"><i class="fa fa-check"></i><b>1.4.3</b> Matrices</a></li>
<li class="chapter" data-level="1.4.4" data-path="ch1.html"><a href="ch1.html#data-frames"><i class="fa fa-check"></i><b>1.4.4</b> Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="ch1.html"><a href="ch1.html#factors"><i class="fa fa-check"></i><b>1.5</b> Factors</a></li>
<li class="chapter" data-level="1.6" data-path="ch1.html"><a href="ch1.html#vector-math"><i class="fa fa-check"></i><b>1.6</b> Vector Math</a></li>
<li class="chapter" data-level="1.7" data-path="ch1.html"><a href="ch1.html#sub"><i class="fa fa-check"></i><b>1.7</b> Data Subsets/Queries</a></li>
<li class="chapter" data-level="" data-path="ch1.html"><a href="ch1.html#exercise-1a"><i class="fa fa-check"></i>Exercise 1A</a></li>
<li class="chapter" data-level="1.8" data-path="ch1.html"><a href="ch1.html#read"><i class="fa fa-check"></i><b>1.8</b> Read External Data Files</a></li>
<li class="chapter" data-level="1.9" data-path="ch1.html"><a href="ch1.html#data-summaries"><i class="fa fa-check"></i><b>1.9</b> Explore the Data Set</a></li>
<li class="chapter" data-level="1.10" data-path="ch1.html"><a href="ch1.html#logicalboolean-operators"><i class="fa fa-check"></i><b>1.10</b> Logical/Boolean Operators</a></li>
<li class="chapter" data-level="1.11" data-path="ch1.html"><a href="ch1.html#logsub"><i class="fa fa-check"></i><b>1.11</b> Logical Subsetting</a></li>
<li class="chapter" data-level="1.12" data-path="ch1.html"><a href="ch1.html#if-else-and-ifelse"><i class="fa fa-check"></i><b>1.12</b> <code>if()</code>, <code>else</code>, and <code>ifelse()</code></a></li>
<li class="chapter" data-level="1.13" data-path="ch1.html"><a href="ch1.html#writing-output-files"><i class="fa fa-check"></i><b>1.13</b> Writing Output Files</a><ul>
<li class="chapter" data-level="1.13.1" data-path="ch1.html"><a href="ch1.html#csv-files"><i class="fa fa-check"></i><b>1.13.1</b> <code>.csv</code> Files</a></li>
<li class="chapter" data-level="1.13.2" data-path="ch1.html"><a href="ch1.html#saving-r-objects"><i class="fa fa-check"></i><b>1.13.2</b> Saving R Objects</a></li>
</ul></li>
<li class="chapter" data-level="1.14" data-path="ch1.html"><a href="ch1.html#user-funcs"><i class="fa fa-check"></i><b>1.14</b> User-Defined Functions</a></li>
<li class="chapter" data-level="" data-path="ch1.html"><a href="ch1.html#ex1b"><i class="fa fa-check"></i>Exercise 1B</a><ul>
<li class="chapter" data-level="" data-path="ch1.html"><a href="ch1.html#exercise-1b-bonus"><i class="fa fa-check"></i>Exercise 1B Bonus</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ch2.html"><a href="ch2.html"><i class="fa fa-check"></i><b>2</b> Base R Plotting Basics</a><ul>
<li class="chapter" data-level="" data-path="ch2.html"><a href="ch2.html#chapter-overview-1"><i class="fa fa-check"></i>Chapter Overview</a></li>
<li class="chapter" data-level="" data-path="ch2.html"><a href="ch2.html#before-you-begin-1"><i class="fa fa-check"></i>Before You Begin</a></li>
<li class="chapter" data-level="2.1" data-path="ch2.html"><a href="ch2.html#r-plotting-lingo"><i class="fa fa-check"></i><b>2.1</b> R Plotting Lingo</a></li>
<li class="chapter" data-level="2.2" data-path="ch2.html"><a href="ch2.html#lower-level-plotting-functions"><i class="fa fa-check"></i><b>2.2</b> Lower Level Plotting Functions</a></li>
<li class="chapter" data-level="2.3" data-path="ch2.html"><a href="ch2.html#other-high-level-plotting-functions"><i class="fa fa-check"></i><b>2.3</b> Other High-Level Plotting Functions</a><ul>
<li class="chapter" data-level="2.3.1" data-path="ch2.html"><a href="ch2.html#the-bar-graph"><i class="fa fa-check"></i><b>2.3.1</b> The Bar Graph</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="ch2.html"><a href="ch2.html#box-whisker"><i class="fa fa-check"></i><b>2.4</b> Box-and-Whisker Plots</a></li>
<li class="chapter" data-level="2.5" data-path="ch2.html"><a href="ch2.html#histograms"><i class="fa fa-check"></i><b>2.5</b> Histograms</a></li>
<li class="chapter" data-level="2.6" data-path="ch2.html"><a href="ch2.html#the-par-function"><i class="fa fa-check"></i><b>2.6</b> The <code>par()</code> Function</a></li>
<li class="chapter" data-level="2.7" data-path="ch2.html"><a href="ch2.html#new-temporary-devices"><i class="fa fa-check"></i><b>2.7</b> New Temporary Devices</a></li>
<li class="chapter" data-level="2.8" data-path="ch2.html"><a href="ch2.html#multi-panel-plots"><i class="fa fa-check"></i><b>2.8</b> Multi-panel Plots</a></li>
<li class="chapter" data-level="2.9" data-path="ch2.html"><a href="ch2.html#legends"><i class="fa fa-check"></i><b>2.9</b> Legends</a></li>
<li class="chapter" data-level="2.10" data-path="ch2.html"><a href="ch2.html#exporting-plots"><i class="fa fa-check"></i><b>2.10</b> Exporting Plots</a><ul>
<li class="chapter" data-level="2.10.1" data-path="ch2.html"><a href="ch2.html#click-save"><i class="fa fa-check"></i><b>2.10.1</b> Click Save</a></li>
<li class="chapter" data-level="2.10.2" data-path="ch2.html"><a href="ch2.html#file-devices"><i class="fa fa-check"></i><b>2.10.2</b> Use a function to place plot in a new file</a></li>
</ul></li>
<li class="chapter" data-level="2.11" data-path="ch2.html"><a href="ch2.html#error-bars"><i class="fa fa-check"></i><b>2.11</b> Bonus Topic: Error Bars</a></li>
<li class="chapter" data-level="" data-path="ch2.html"><a href="ch2.html#ex2"><i class="fa fa-check"></i>Exercise 2</a><ul>
<li class="chapter" data-level="" data-path="ch2.html"><a href="ch2.html#exercise-2-bonus"><i class="fa fa-check"></i>EXERCISE 2 BONUS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ch3.html"><a href="ch3.html"><i class="fa fa-check"></i><b>3</b> Basic Statistics</a><ul>
<li class="chapter" data-level="" data-path="ch3.html"><a href="ch3.html#chapter-overview-2"><i class="fa fa-check"></i>Chapter Overview</a></li>
<li class="chapter" data-level="" data-path="ch3.html"><a href="ch3.html#before-you-begin-2"><i class="fa fa-check"></i>Before You Begin</a></li>
<li class="chapter" data-level="3.1" data-path="ch3.html"><a href="ch3.html#lm"><i class="fa fa-check"></i><b>3.1</b> The General Linear Model</a><ul>
<li class="chapter" data-level="3.1.1" data-path="ch3.html"><a href="ch3.html#regression"><i class="fa fa-check"></i><b>3.1.1</b> Simple Linear Regression</a></li>
<li class="chapter" data-level="3.1.2" data-path="ch3.html"><a href="ch3.html#anova"><i class="fa fa-check"></i><b>3.1.2</b> ANOVA: Categorical predictors</a></li>
<li class="chapter" data-level="3.1.3" data-path="ch3.html"><a href="ch3.html#ancova-continuous-and-categorical-predictors"><i class="fa fa-check"></i><b>3.1.3</b> ANCOVA: Continuous and categorical predictors</a></li>
<li class="chapter" data-level="3.1.4" data-path="ch3.html"><a href="ch3.html#interactions"><i class="fa fa-check"></i><b>3.1.4</b> Interactions</a></li>
<li class="chapter" data-level="3.1.5" data-path="ch3.html"><a href="ch3.html#aic-model-selection"><i class="fa fa-check"></i><b>3.1.5</b> AIC Model Selection</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="ch3.html"><a href="ch3.html#glms"><i class="fa fa-check"></i><b>3.2</b> The Generalized Linear Model</a><ul>
<li class="chapter" data-level="3.2.1" data-path="ch3.html"><a href="ch3.html#logis-regression"><i class="fa fa-check"></i><b>3.2.1</b> Logistic Regression</a></li>
<li class="chapter" data-level="3.2.2" data-path="ch3.html"><a href="ch3.html#aic-model-selection-1"><i class="fa fa-check"></i><b>3.2.2</b> AIC Model Selection</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="ch3.html"><a href="ch3.html#dists"><i class="fa fa-check"></i><b>3.3</b> Probability Distributions</a></li>
<li class="chapter" data-level="3.4" data-path="ch3.html"><a href="ch3.html#nls"><i class="fa fa-check"></i><b>3.4</b> Bonus Topic: Non-linear Regression</a></li>
<li class="chapter" data-level="" data-path="ch3.html"><a href="ch3.html#exercise-3"><i class="fa fa-check"></i>Exercise 3</a><ul>
<li class="chapter" data-level="" data-path="ch3.html"><a href="ch3.html#exercise-3-bonus"><i class="fa fa-check"></i>Exercise 3 Bonus</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ch4.html"><a href="ch4.html"><i class="fa fa-check"></i><b>4</b> Monte Carlo Methods</a><ul>
<li class="chapter" data-level="" data-path="ch4.html"><a href="ch4.html#chapter-overview-3"><i class="fa fa-check"></i>Chapter Overview</a></li>
<li class="chapter" data-level="" data-path="ch4.html"><a href="ch4.html#before-you-begin-3"><i class="fa fa-check"></i>Before You Begin</a></li>
<li class="chapter" data-level="" data-path="ch4.html"><a href="ch4.html#layout-of-this-chapter"><i class="fa fa-check"></i>Layout of This Chapter</a></li>
<li class="chapter" data-level="4.1" data-path="ch4.html"><a href="ch4.html#randomness"><i class="fa fa-check"></i><b>4.1</b> Introducing Randomness</a><ul>
<li class="chapter" data-level="4.1.1" data-path="ch4.html"><a href="ch4.html#random-deviates"><i class="fa fa-check"></i><b>4.1.1</b> Random deviates</a></li>
<li class="chapter" data-level="4.1.2" data-path="ch4.html"><a href="ch4.html#resampling"><i class="fa fa-check"></i><b>4.1.2</b> Resampling</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="ch4.html"><a href="ch4.html#reproducing-randomness"><i class="fa fa-check"></i><b>4.2</b> Reproducing Randomness</a></li>
<li class="chapter" data-level="4.3" data-path="ch4.html"><a href="ch4.html#replication"><i class="fa fa-check"></i><b>4.3</b> Replication</a><ul>
<li class="chapter" data-level="4.3.1" data-path="ch4.html"><a href="ch4.html#replicate"><i class="fa fa-check"></i><b>4.3.1</b> <code>replicate()</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="ch4.html"><a href="ch4.html#for-loops"><i class="fa fa-check"></i><b>4.3.2</b> The <code>for()</code> loop</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="ch4.html"><a href="ch4.html#adv-funcs"><i class="fa fa-check"></i><b>4.4</b> Function Writing</a></li>
<li class="chapter" data-level="4.5" data-path="ch4.html"><a href="ch4.html#mc-summaries"><i class="fa fa-check"></i><b>4.5</b> Summarization</a><ul>
<li class="chapter" data-level="4.5.1" data-path="ch4.html"><a href="ch4.html#central-tendency"><i class="fa fa-check"></i><b>4.5.1</b> Central Tendency</a></li>
<li class="chapter" data-level="4.5.2" data-path="ch4.html"><a href="ch4.html#variability"><i class="fa fa-check"></i><b>4.5.2</b> Variability</a></li>
<li class="chapter" data-level="4.5.3" data-path="ch4.html"><a href="ch4.html#frequencies"><i class="fa fa-check"></i><b>4.5.3</b> Frequencies</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="ch4.html"><a href="ch4.html#sim-examples"><i class="fa fa-check"></i><b>4.6</b> Simulation-Based Examples</a><ul>
<li class="chapter" data-level="4.6.1" data-path="ch4.html"><a href="ch4.html#rnorm-ex"><i class="fa fa-check"></i><b>4.6.1</b> Test <code>rnorm</code></a></li>
<li class="chapter" data-level="4.6.2" data-path="ch4.html"><a href="ch4.html#power-ex"><i class="fa fa-check"></i><b>4.6.2</b> Stochastic Power Analysis</a></li>
<li class="chapter" data-level="4.6.3" data-path="ch4.html"><a href="ch4.html#harv-ex"><i class="fa fa-check"></i><b>4.6.3</b> Harvest Policy Analysis</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="ch4.html"><a href="ch4.html#resample-examples"><i class="fa fa-check"></i><b>4.7</b> Resampling-Based Examples</a><ul>
<li class="chapter" data-level="4.7.1" data-path="ch4.html"><a href="ch4.html#boot-test-ex"><i class="fa fa-check"></i><b>4.7.1</b> The Bootstrap</a></li>
<li class="chapter" data-level="4.7.2" data-path="ch4.html"><a href="ch4.html#perm-test-ex"><i class="fa fa-check"></i><b>4.7.2</b> Permutation Test</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="ch4.html"><a href="ch4.html#exercise-4"><i class="fa fa-check"></i><b>4.8</b> Exercise 4</a><ul>
<li class="chapter" data-level="" data-path="ch4.html"><a href="ch4.html#exercise-4a-required-material-only"><i class="fa fa-check"></i>Exercise 4A: Required Material Only</a></li>
<li><a href="ch4.html#exercise-4b-test-rnorm">Exercise 4B: Test <code>rnorm</code></a></li>
<li class="chapter" data-level="" data-path="ch4.html"><a href="ch4.html#exercise-4c-stochastic-power-analysis"><i class="fa fa-check"></i>Exercise 4C: Stochastic Power Analysis</a></li>
<li class="chapter" data-level="" data-path="ch4.html"><a href="ch4.html#exercise-4d-harvest-policy-analysis"><i class="fa fa-check"></i>Exercise 4D: Harvest Policy Analysis</a></li>
<li class="chapter" data-level="" data-path="ch4.html"><a href="ch4.html#exercise-4e-the-bootstrap"><i class="fa fa-check"></i>Exercise 4E: The Bootstrap</a></li>
<li class="chapter" data-level="" data-path="ch4.html"><a href="ch4.html#exercise-4f-permutation-tests"><i class="fa fa-check"></i>Exercise 4F: Permutation Tests</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ch5.html"><a href="ch5.html"><i class="fa fa-check"></i><b>5</b> Large Data Manipulation</a><ul>
<li class="chapter" data-level="" data-path="ch5.html"><a href="ch5.html#chapter-overview-4"><i class="fa fa-check"></i>Chapter Overview</a></li>
<li class="chapter" data-level="" data-path="ch5.html"><a href="ch5.html#before-you-begin-4"><i class="fa fa-check"></i>Before You Begin</a></li>
<li class="chapter" data-level="5.1" data-path="ch5.html"><a href="ch5.html#aquiring-and-loading-packages"><i class="fa fa-check"></i><b>5.1</b> Aquiring and Loading Packages</a></li>
<li class="chapter" data-level="5.2" data-path="ch5.html"><a href="ch5.html#the-data"><i class="fa fa-check"></i><b>5.2</b> The Data</a></li>
<li class="chapter" data-level="5.3" data-path="ch5.html"><a href="ch5.html#change-format-using-melt"><i class="fa fa-check"></i><b>5.3</b> Change format using <code>melt()</code></a></li>
<li class="chapter" data-level="5.4" data-path="ch5.html"><a href="ch5.html#join-data-sets-with-merge"><i class="fa fa-check"></i><b>5.4</b> Join Data Sets with <code>merge()</code></a></li>
<li class="chapter" data-level="5.5" data-path="ch5.html"><a href="ch5.html#lagged-vectors"><i class="fa fa-check"></i><b>5.5</b> Lagged vectors</a></li>
<li class="chapter" data-level="5.6" data-path="ch5.html"><a href="ch5.html#adding-columns-with-mutate"><i class="fa fa-check"></i><b>5.6</b> Adding columns with <code>mutate()</code></a></li>
<li class="chapter" data-level="5.7" data-path="ch5.html"><a href="ch5.html#apply-to-all-years"><i class="fa fa-check"></i><b>5.7</b> Apply to all years</a></li>
<li class="chapter" data-level="5.8" data-path="ch5.html"><a href="ch5.html#calculate-daily-means-with-summarize"><i class="fa fa-check"></i><b>5.8</b> Calculate Daily Means with <code>summarize()</code></a></li>
<li class="chapter" data-level="5.9" data-path="ch5.html"><a href="ch5.html#more-summarize"><i class="fa fa-check"></i><b>5.9</b> More <code>summarize()</code></a></li>
<li class="chapter" data-level="5.10" data-path="ch5.html"><a href="ch5.html#fit-the-model"><i class="fa fa-check"></i><b>5.10</b> Fit the Model</a></li>
<li class="chapter" data-level="" data-path="ch5.html"><a href="ch5.html#exercise-5"><i class="fa fa-check"></i>Exercise 5</a><ul>
<li class="chapter" data-level="" data-path="ch5.html"><a href="ch5.html#exercise-5-bonus"><i class="fa fa-check"></i>Exercise 5 Bonus</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ch6.html"><a href="ch6.html"><i class="fa fa-check"></i><b>6</b> Mapping and Spatial Analysis</a><ul>
<li class="chapter" data-level="6.1" data-path="ch6.html"><a href="ch6.html#ch6overview"><i class="fa fa-check"></i><b>6.1</b> Chapter Overview</a></li>
<li class="chapter" data-level="6.2" data-path="ch6.html"><a href="ch6.html#ch6beforeyoubegin"><i class="fa fa-check"></i><b>6.2</b> Before You Begin</a></li>
<li class="chapter" data-level="6.3" data-path="ch6.html"><a href="ch6.html#intro"><i class="fa fa-check"></i><b>6.3</b> Geospatial Data</a></li>
<li class="chapter" data-level="6.4" data-path="ch6.html"><a href="ch6.html#Import"><i class="fa fa-check"></i><b>6.4</b> Importing Geospatial Data</a><ul>
<li class="chapter" data-level="6.4.1" data-path="ch6.html"><a href="ch6.html#csv-files-1"><i class="fa fa-check"></i><b>6.4.1</b> <code>.csv</code> files</a></li>
<li class="chapter" data-level="6.4.2" data-path="ch6.html"><a href="ch6.html#shp-files"><i class="fa fa-check"></i><b>6.4.2</b> <code>.shp</code> files</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="ch6.html"><a href="ch6.html#SpatPlot"><i class="fa fa-check"></i><b>6.5</b> Plotting</a><ul>
<li class="chapter" data-level="6.5.1" data-path="ch6.html"><a href="ch6.html#zoom"><i class="fa fa-check"></i><b>6.5.1</b> Zooming</a></li>
<li class="chapter" data-level="6.5.2" data-path="ch6.html"><a href="ch6.html#plot-selections"><i class="fa fa-check"></i><b>6.5.2</b> Plotting Selections</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="ch6.html"><a href="ch6.html#ManipSpat"><i class="fa fa-check"></i><b>6.6</b> Manipulating Spatial Data</a><ul>
<li class="chapter" data-level="6.6.1" data-path="ch6.html"><a href="ch6.html#crs"><i class="fa fa-check"></i><b>6.6.1</b> Changing the CRS</a></li>
<li class="chapter" data-level="6.6.2" data-path="ch6.html"><a href="ch6.html#clip"><i class="fa fa-check"></i><b>6.6.2</b> Clipping</a></li>
<li class="chapter" data-level="6.6.3" data-path="ch6.html"><a href="ch6.html#add-attr"><i class="fa fa-check"></i><b>6.6.3</b> Adding Attributes</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="ch6.html"><a href="ch6.html#Anal"><i class="fa fa-check"></i><b>6.7</b> Analysis</a><ul>
<li class="chapter" data-level="6.7.1" data-path="ch6.html"><a href="ch6.html#hr-Anal"><i class="fa fa-check"></i><b>6.7.1</b> Home Range Analysis</a></li>
<li class="chapter" data-level="6.7.2" data-path="ch6.html"><a href="ch6.html#finding-intersections-between-two-layers"><i class="fa fa-check"></i><b>6.7.2</b> Finding Intersections Between Two Layers</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="ch6.html"><a href="ch6.html#base-maps"><i class="fa fa-check"></i><b>6.8</b> Creating a Presentable Map</a></li>
<li class="chapter" data-level="6.9" data-path="ch6.html"><a href="ch6.html#other-r-mapping-packages"><i class="fa fa-check"></i><b>6.9</b> Other R Mapping Packages</a><ul>
<li class="chapter" data-level="6.9.1" data-path="ch6.html"><a href="ch6.html#ggmap"><i class="fa fa-check"></i><b>6.9.1</b> <code>{ggmap}</code></a></li>
<li class="chapter" data-level="6.9.2" data-path="ch6.html"><a href="ch6.html#leaflet"><i class="fa fa-check"></i><b>6.9.2</b> <code>{leaflet}</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ch6.html"><a href="ch6.html#ex6"><i class="fa fa-check"></i>Exercise 6</a></li>
<li class="chapter" data-level="" data-path="ch6.html"><a href="ch6.html#exercise-6-bonus"><i class="fa fa-check"></i>Exercise 6 Bonus</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html"><i class="fa fa-check"></i>Exercise Solutions</a><ul>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#ex2-answers"><i class="fa fa-check"></i>Exercise 1 Solutions</a><ul>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#ex1a-answers"><i class="fa fa-check"></i>Exercise 1A Solutions</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#ex1b-answers"><i class="fa fa-check"></i>Exercise 1B Solutions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#ex2-answers"><i class="fa fa-check"></i>Exercise 2 Solutions</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#ex3-answers"><i class="fa fa-check"></i>Exercise 3 Solutions</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#ex4-answers"><i class="fa fa-check"></i>Exercise 4 Solutions</a><ul>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#ex4a-answers"><i class="fa fa-check"></i>Exercise 4A Solutions</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#ex4b-answers"><i class="fa fa-check"></i>Exercise 4B Solutions</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#ex4c-answers"><i class="fa fa-check"></i>Exercise 4C Solutions</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#ex4d-answers"><i class="fa fa-check"></i>Exercise 4D Solutions</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#ex4e-answers"><i class="fa fa-check"></i>Exercise 4E Solutions</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#ex4f-answers"><i class="fa fa-check"></i>Exercise 4F Solutions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#ex5-answers"><i class="fa fa-check"></i>Exercise 5 Solutions</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#ex6-answers"><i class="fa fa-check"></i>Exercise 6 Solutions</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/davan690/au-r-workshop" target="blank">Get the Data</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R for Natural Resource Scientists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ch1" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Introduction to the R Environment</h1>
<div id="chapter-overview" class="section level2 unnumbered">
<h2>Chapter Overview</h2>
<p>In this first chapter, you will get familiar with the basics of using R. You will learn:</p>
<ul>
<li>how to use R as a basic calculator</li>
<li>some basic object types</li>
<li>some basic data classes</li>
<li>some basic data structures</li>
<li>how to read in data</li>
<li>how to produce basic data summaries</li>
<li>how to write out data</li>
<li>how to write your own functions</li>
</ul>
</div>
<div id="before-you-begin" class="section level2 unnumbered">
<h2>Before You Begin</h2>
<p>Before you start this chapter, you should make sure you have read and done everything in the <a href="index.html#overview">Overview</a> pertaining to <a href="index.html#comp-prep">preparing your computer</a> for working through this book.</p>
</div>
<div id="the-r-studio-interface" class="section level2">
<h2><span class="header-section-number">1.1</span> The R Studio Interface</h2>
<p>When you open up RStudio for the first time, you will see three panes: the left-hand side is the <strong>console</strong> where results from executed commands are printed, and the two panes on the right are for additional information to help you code more efficiently - don’t worry too much about what these are at the moment. For now, focus your attention on the console.</p>
<div id="write-some-simple-code" class="section level3">
<h3><span class="header-section-number">1.1.1</span> Write Some Simple Code</h3>
<p>To start off, you will use R as a simple calculator. Type these commands (not the lines with <code>##</code>, those are output<a href="exercise-solutions.html#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a>) one at a time and hit <strong>CTRL + ENTER</strong> to run it. The spaces don’t matter at all, they are used here for clarity and for styling. To learn more about standard R code styling, check out the section in <span class="citation">Wickham (<a href="#ref-adv-r-cite" role="doc-biblioref">2015</a>)</span> on it<a href="exercise-solutions.html#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="ch1.html#cb2-1"></a><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span></span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="ch1.html#cb4-1"></a><span class="dv">12</span><span class="op">/</span><span class="dv">4</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Notice that when you run each line, it prints the command and the output to the console.</p>
<p>R is an <strong>object oriented language</strong>, which means that you fill objects with data and do things with them. Make an object called <code>x</code> that stores the result of the calculation <code>3 + 3</code> (type this and run using <strong>CTRL + ENTER</strong>):</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="ch1.html#cb6-1"></a>x =<span class="st"> </span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span></span></code></pre></div>
<p>Notice that running this line did not return a value as before. This is because in that line you are <strong>assigning</strong> a value to the object <code>x</code>. You can view the contents of <code>x</code> by typing its name alone and running just that:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="ch1.html#cb7-1"></a>x</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>When used this way, the <code>=</code> sign denotes assignment of the value on the right-hand side to an object with the name on the left-hand side. The <code>&lt;-</code> serves this same purpose so in this context the two are interchangeable:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="ch1.html#cb9-1"></a>y &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">5</span></span></code></pre></div>
<p>You can highlight smaller sections of a line to run as well. For example after creating <code>y</code> above, press the <strong>up arrow</strong> to see the line you just ran, highlight just the <code>y</code>, and press <strong>CTRL + ENTER</strong>. From this point forward, the verb “run” means execute some code using <strong>CTRL + ENTER</strong>.</p>
<p>You can use your objects together to make a new object:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="ch1.html#cb10-1"></a>z =<span class="st"> </span>y <span class="op">-</span><span class="st"> </span>x</span></code></pre></div>
<p><strong>Here are some things to note about object names:</strong></p>
<ul>
<li>Object names can contain any of the following:
<ul>
<li>letters</li>
<li>numbers</li>
<li>the <code>.</code> or <code>_</code> symbols</li>
</ul></li>
<li>Object names must start with a letter, not a number or symbol and cannot contain spaces</li>
<li>As a general rule, avoid naming your objects things that already have names in R, e.g., <code>data()</code>, <code>mean()</code>, <code>sum()</code>, <code>sd()</code>, etc.</li>
<li>Capitalization matters: <code>A</code> and <code>a</code> are two different objects</li>
<li>Keep your names short with abbreviations or shorthand</li>
</ul>
</div>
</div>
<div id="scripts" class="section level2">
<h2><span class="header-section-number">1.2</span> Saving Your Code: Scripts</h2>
<p>If you closed R at this moment, your work would be lost. Running code in the console like you have just done <strong>does not save a record of your work</strong>. To save R code, you must use what is called a <strong>script</strong>, which is a plain-text file with the extension <code>.R</code>. To create a new script file, go to <em>File &gt; New File &gt; R Script</em>, or use the keyboard shortcut <strong>CTRL + SHIFT + N</strong>. A new pane will open called the <strong>source</strong> pane - this is where you will edit your code and save your progress. R Scripts are a key feature of reproducible research with R, given that if they are well-written they can present a complete road map of your statistical analysis and workflow.</p>
</div>
<div id="working-dir" class="section level2">
<h2><span class="header-section-number">1.3</span> The Working Directory</h2>
<p>Keeping things organized is essential to efficient use of R. For this book, you should have a separate subfolder for your scripts in each chapter. Create a subfolder called <code>C:/Users/YOU/Documents/R-Book/Chapter1</code> and save your <code>Ch1.R</code> script there.</p>
<p>Part of keeping your work organized in R is making sure you know where R is looking for your files. One way to facilitate this is to use a <strong>working directory</strong>. This is the location (i.e., folder) on your computer that your current R session will “talk to” by default. R will read files from and write files to the working directory by default. Because you’ll likely be visiting it often, it should probably be somewhere that is easy to remember and not too deeply buried in your computer’s file system.</p>
<p>To set the working directory to <code>C:/Users/YOU/Documents/R-Book/Chapter1</code>, you have three options:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Go to Session &gt; Set Working Directory &gt; Source File Location</strong>. This will set the working directory to the location of the file that is currently open in your source pane.</p></li>
<li><p><strong>Go to Session &gt; Set Working Directory &gt; Choose Directory</strong>. This will open an interactive file selection window to allow you to navigate to the desired directory.</p></li>
<li><p><strong>Use code</strong>. In the console, you can type <code>setwd("C:/Users/YOU/Documents/R-Book/Chapter1")</code>. If at any point you want to know where your current working directory is set to, you can either look at the top of the console pane, which shows the full path or by running <code>getwd()</code> in the console. Note the use of <code>/</code> rather than <code>\</code> for file paths in R. If you are using a Mac, omit <code>C:</code> from your directory name.</p></li>
</ol>
<p><strong>The main benefits of using a working directory are</strong>:</p>
<ul>
<li>Files are read from and written to a consistent and predictable place every time</li>
<li>Everything for your analysis is organized into one place on your computer</li>
<li>You don’t have to continuously type file paths to your work. If <code>file.txt</code> is a file in your current working directory, you can reference it your R session using <code>"file.txt"</code> rather than with <code>"C:/Users/YOU/Documents/R-Book/Chapter1/file.txt"</code> each time.</li>
</ul>
<p>Note that while it is generally good practice to keep your data in the working directory, this is not recommended for this book. You will be using the same data files in multiple chapters, so it will help if they are all stored in one location. More details on this later (Section <a href="ch1.html#read">1.8</a>).</p>
</div>
<div id="r-object-types" class="section level2">
<h2><span class="header-section-number">1.4</span> R Object Types</h2>
<p>R has a variety of object types that you will need to become familiar with.</p>
<div id="functions" class="section level3">
<h3><span class="header-section-number">1.4.1</span> Functions</h3>
<p>Much of your work in R will involve functions. A function is called using the syntax:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="ch1.html#cb11-1"></a><span class="kw">fun</span>(<span class="dt">arg1 =</span> value1, <span class="dt">arg2 =</span> value2)</span></code></pre></div>
<p>Here, <code>fun()</code> is the <strong>function name</strong> and <code>arg1</code> and <code>arg2</code> are called <strong>arguments</strong>. Functions take input in the form of the arguments, do some task with them, then return some output. The parentheses are a sure sign that <code>fun()</code> is a function.</p>
<p>The syntax above passes the function two arguments by name: all functions have arguments, all arguments have names, and there is always a default order to the arguments. If you memorize the argument order of functions you use frequently, you don’t have to specify the argument names:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="ch1.html#cb12-1"></a><span class="kw">fun</span>(value1, value2)</span></code></pre></div>
<p>would give the same result as the command above in which the argument names were specified.</p>
<p>Here’s a real example:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="ch1.html#cb13-1"></a><span class="kw">print</span>(<span class="dt">x =</span> z)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>The function is <code>print()</code>, the argument is <code>x</code>, and the value you have supplied the argument is the object <code>z</code>. The task that <code>print()</code> does is to print the value of <code>z</code> to the console.</p>
<p>R has a ton of built-in documentation to help you learn how to use a function. Take a look at the help file for the <code>mean()</code> function. Run <code>?mean</code> in the console: a window on the right-hand side of the R Studio interface should open. The help file tells you what goes into a function and what comes out. For more complex functions it also tells you what all of the options (i.e., arguments) can do. Help files can be a bit intimidating to interpret at first, but they are all organized the same and once you learn their layout you will know where to go to find the information you’re looking for.</p>
</div>
<div id="vectors" class="section level3">
<h3><span class="header-section-number">1.4.2</span> Vectors</h3>
<p>Vectors are one of the most common data structures. A vector is a set of numbers going in only one dimension. Each position in a vector is called an <strong>element</strong>, and the number of elements is called the <strong>length</strong> of the vector. Here are some ways to make some vectors with different elements, all of length five:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="ch1.html#cb15-1"></a><span class="co"># this is a comment. R will ignore all text on a line after a #</span></span>
<span id="cb15-2"><a href="ch1.html#cb15-2"></a><span class="co"># the ; means run everything after it on a new line</span></span>
<span id="cb15-3"><a href="ch1.html#cb15-3"></a></span>
<span id="cb15-4"><a href="ch1.html#cb15-4"></a><span class="co"># count up by 1</span></span>
<span id="cb15-5"><a href="ch1.html#cb15-5"></a>month =<span class="st"> </span><span class="dv">2</span><span class="op">:</span><span class="dv">6</span>; month</span></code></pre></div>
<pre><code>## [1] 2 3 4 5 6</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="ch1.html#cb17-1"></a><span class="co"># count up by 2</span></span>
<span id="cb17-2"><a href="ch1.html#cb17-2"></a>day =<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">1</span>, <span class="dt">to =</span> <span class="dv">9</span>, <span class="dt">by =</span> <span class="dv">2</span>); day</span></code></pre></div>
<pre><code>## [1] 1 3 5 7 9</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="ch1.html#cb19-1"></a><span class="co"># repeat the same number (repeat 2018 5 times)</span></span>
<span id="cb19-2"><a href="ch1.html#cb19-2"></a>year =<span class="st"> </span><span class="kw">rep</span>(<span class="dv">2018</span>, <span class="dv">5</span>); year</span></code></pre></div>
<pre><code>## [1] 2018 2018 2018 2018 2018</code></pre>
<p>The <code>[1]</code> that shows up is an element position, more on this later (see Section <a href="ch1.html#sub">1.7</a>). If you wish to know how many elements are in a vector, use <code>length()</code>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="ch1.html#cb21-1"></a><span class="kw">length</span>(year)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>You can also create a vector “by-hand” using the <code>c()</code> function<a href="exercise-solutions.html#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a>:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="ch1.html#cb23-1"></a><span class="co"># a numeric vector</span></span>
<span id="cb23-2"><a href="ch1.html#cb23-2"></a>number =<span class="st"> </span><span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">15</span>); number</span></code></pre></div>
<pre><code>## [1]  4  7  8 10 15</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="ch1.html#cb25-1"></a><span class="co"># a character vector</span></span>
<span id="cb25-2"><a href="ch1.html#cb25-2"></a>pond =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;F11&quot;</span>, <span class="st">&quot;S28&quot;</span>, <span class="st">&quot;S30&quot;</span>, <span class="st">&quot;S8&quot;</span>, <span class="st">&#39;S11&#39;</span>); pond</span></code></pre></div>
<pre><code>## [1] &quot;F11&quot; &quot;S28&quot; &quot;S30&quot; &quot;S8&quot;  &quot;S11&quot;</code></pre>
<p>Note the difference between the numeric and character vectors. The terms “numeric” and “character”" represent <strong>data classes</strong>, which specify the type of data the vector is holding:</p>
<ul>
<li>A <strong>numeric vector</strong> stores numbers. You can do math with numeric vectors</li>
<li>A <strong>character vector</strong> stores what are essentially letters. You can’t do math with letters. A character vector is easy to spot because the elements will be wrapped with quotes<a href="exercise-solutions.html#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>.</li>
</ul>
<p>A vector can only hold one data class at a time:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="ch1.html#cb27-1"></a>v =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="st">&quot;a&quot;</span>); v</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;a&quot;</code></pre>
<p>Notice how all the elements now have quotes around them. The numbers have been <strong>coerced</strong> to characters<a href="exercise-solutions.html#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>. If you attempt to calculate the sum of your vector:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="ch1.html#cb29-1"></a><span class="kw">sum</span>(v)</span></code></pre></div>
<pre><code>## Error in sum(v): invalid &#39;type&#39; (character) of argument</code></pre>
<p>you would find that it is impossible in its current form.</p>
</div>
<div id="matrices" class="section level3">
<h3><span class="header-section-number">1.4.3</span> Matrices</h3>
<p>Matrices act just like vectors, but they have two dimensions, i.e., they have both rows and columns. An easy way to make a matrix is by combining vectors you have already made:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="ch1.html#cb31-1"></a><span class="co"># combine vectors by column (each vector will become a column)</span></span>
<span id="cb31-2"><a href="ch1.html#cb31-2"></a>m1 =<span class="st"> </span><span class="kw">cbind</span>(month, day, year, number); m1</span></code></pre></div>
<pre><code>##      month day year number
## [1,]     2   1 2018      4
## [2,]     3   3 2018      7
## [3,]     4   5 2018      8
## [4,]     5   7 2018     10
## [5,]     6   9 2018     15</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="ch1.html#cb33-1"></a><span class="co"># combine vectors by row (each vector will become a row)</span></span>
<span id="cb33-2"><a href="ch1.html#cb33-2"></a>m2 =<span class="st"> </span><span class="kw">rbind</span>(month, day, year, number); m2</span></code></pre></div>
<pre><code>##        [,1] [,2] [,3] [,4] [,5]
## month     2    3    4    5    6
## day       1    3    5    7    9
## year   2018 2018 2018 2018 2018
## number    4    7    8   10   15</code></pre>
<p>Just like vectors, matrices can hold only one data class (note the coercion of numbers to characters):</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="ch1.html#cb35-1"></a><span class="kw">cbind</span>(m1, pond)</span></code></pre></div>
<pre><code>##      month day year   number pond 
## [1,] &quot;2&quot;   &quot;1&quot; &quot;2018&quot; &quot;4&quot;    &quot;F11&quot;
## [2,] &quot;3&quot;   &quot;3&quot; &quot;2018&quot; &quot;7&quot;    &quot;S28&quot;
## [3,] &quot;4&quot;   &quot;5&quot; &quot;2018&quot; &quot;8&quot;    &quot;S30&quot;
## [4,] &quot;5&quot;   &quot;7&quot; &quot;2018&quot; &quot;10&quot;   &quot;S8&quot; 
## [5,] &quot;6&quot;   &quot;9&quot; &quot;2018&quot; &quot;15&quot;   &quot;S11&quot;</code></pre>
<p>Each vector should have the same length.</p>
</div>
<div id="data-frames" class="section level3">
<h3><span class="header-section-number">1.4.4</span> Data Frames</h3>
<p>Many data sets you will work with require storing different data classes in different columns, which would rule out the use of a matrix. This is where <strong>data frames</strong> come in:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="ch1.html#cb37-1"></a>df1 =<span class="st"> </span><span class="kw">data.frame</span>(month, day, year, number, pond); df1</span></code></pre></div>
<pre><code>##   month day year number pond
## 1     2   1 2018      4  F11
## 2     3   3 2018      7  S28
## 3     4   5 2018      8  S30
## 4     5   7 2018     10   S8
## 5     6   9 2018     15  S11</code></pre>
<p>Notice the lack of quotation marks which indicates that all variables (i.e., columns) are stored as their original data class.</p>
<p>It is important to know what kind of object type you are using, since R treats them differently. For example, some functions can only use a certain object type. The same holds true for data classes (numeric vs. character). You can quickly determine what kind of object you are dealing with by using the <code>class()</code> function:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="ch1.html#cb39-1"></a><span class="kw">class</span>(day); <span class="kw">class</span>(pond); <span class="kw">class</span>(m1); <span class="kw">class</span>(df1)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<pre><code>## [1] &quot;matrix&quot;</code></pre>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
</div>
</div>
<div id="factors" class="section level2">
<h2><span class="header-section-number">1.5</span> Factors</h2>
<p>At this point, it is worthwhile to introduce an additional data class: factors. Notice the data class of the <code>pond</code> variable in <code>df1</code>:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="ch1.html#cb44-1"></a><span class="kw">class</span>(df1<span class="op">$</span>pond)</span></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<p>The character vector <code>pond</code> was coerced to a factor when you placed it in the data frame. A vector with a <strong>factor</strong> class is like a character vector in that you see letters and that you can’t do math on it. However, a factor has additional properties: in particular, it is a grouping variable. See what happens when you print the <code>pond</code> variable:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="ch1.html#cb46-1"></a>df1<span class="op">$</span>pond</span></code></pre></div>
<pre><code>## [1] F11 S28 S30 S8  S11
## Levels: F11 S11 S28 S30 S8</code></pre>
<p>A factor has levels, with each level being a subcategory of the factor. You can see the unique levels of your factor by running:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="ch1.html#cb48-1"></a><span class="kw">levels</span>(df1<span class="op">$</span>pond)</span></code></pre></div>
<pre><code>## [1] &quot;F11&quot; &quot;S11&quot; &quot;S28&quot; &quot;S30&quot; &quot;S8&quot;</code></pre>
<p>Additionally, factor levels have an assigned order (even if the levels are totally nominal), which will become important in Chapter <a href="ch3.html#ch3">3</a> when you learn how to fit linear models to groups of data, in which one level is the “reference” group that all other groups are compared to (see Section <a href="ch3.html#anova">3.1.2</a> for more details).</p>
<p>If you run into errors about R expecting character vectors, it may be because they are actually stored as factors. When you make a data frame, you’ll often have the option to turn off the automatic factor coercion. For example:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="ch1.html#cb50-1"></a><span class="kw">data.frame</span>(month, day, year, number, pond, <span class="dt">stringsAsFactors =</span> F)</span>
<span id="cb50-2"><a href="ch1.html#cb50-2"></a><span class="kw">read.csv</span>(<span class="st">&quot;streams.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> F)  <span class="co"># see below for details on read.csv</span></span></code></pre></div>
<p>will result in character vectors remaining that way as opposed to being coerced to factors. This can be preferable if you are doing many string manipulations, as character vectors are often easier to work with than factors.</p>
</div>
<div id="vector-math" class="section level2">
<h2><span class="header-section-number">1.6</span> Vector Math</h2>
<p>R does vectorized calculations. This means that if supplied with two numeric vectors of equal length and a mathematical operator, R will perform the calculation on each pair of elements. For example, if you wanted to add the two vectors <code>day</code> and <code>month</code>, then you would just run:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="ch1.html#cb51-1"></a>dm =<span class="st"> </span>day <span class="op">+</span><span class="st"> </span>month; dm</span></code></pre></div>
<pre><code>## [1]  3  6  9 12 15</code></pre>
<p>Look at the contents of both <code>day</code> and <code>month</code> again to make sure you see what R did. You typically should ensure that the vectors you are doing math with are of equal lengths.</p>
<p>You could do the same calculation to each element of a vector (e.g., divide each element by 2) with:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="ch1.html#cb53-1"></a>dm<span class="op">/</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 1.5 3.0 4.5 6.0 7.5</code></pre>
</div>
<div id="sub" class="section level2">
<h2><span class="header-section-number">1.7</span> Data Subsets/Queries</h2>
<p>This is perhaps the most important and versatile skill to know in R. Say you have an object with data in it and you want to use it for analysis, but you don’t want the whole data set: just a few rows or just a few columns, or perhaps you need just a single element from a vector. This section is devoted to ways you can extract certain parts of data objects (the terms <strong>query</strong> and <strong>subset</strong> are often used interchangeably to describe this task). There are three main methods:</p>
<ol style="list-style-type: decimal">
<li><strong>By Index</strong> – This method allows you to pull out specific rows/columns by their location in an object. However, you must know exactly where in the object the desired data are. An <strong>index</strong> is a location of an element in a data object, like the element position or the position of a specific row or column. The syntax for subsetting a vector by index is <code>vector[element]</code> and for a matrix it is <code>matrix[row,column]</code>. Here are some examples:</li>
</ol>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="ch1.html#cb55-1"></a><span class="co"># show all of day, then subset the third element</span></span>
<span id="cb55-2"><a href="ch1.html#cb55-2"></a>day; day[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 1 3 5 7 9</code></pre>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="ch1.html#cb58-1"></a><span class="co"># show all of m1, then subset the cell in row 1 col 4 </span></span>
<span id="cb58-2"><a href="ch1.html#cb58-2"></a>m1; m1[<span class="dv">1</span>,<span class="dv">4</span>]</span></code></pre></div>
<pre><code>##      month day year number
## [1,]     2   1 2018      4
## [2,]     3   3 2018      7
## [3,]     4   5 2018      8
## [4,]     5   7 2018     10
## [5,]     6   9 2018     15</code></pre>
<pre><code>## number 
##      4</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="ch1.html#cb61-1"></a><span class="co"># show all of df1, then subset the entire first column</span></span>
<span id="cb61-2"><a href="ch1.html#cb61-2"></a>df1; df1[,<span class="dv">1</span>]</span></code></pre></div>
<pre><code>##   month day year number pond
## 1     2   1 2018      4  F11
## 2     3   3 2018      7  S28
## 3     4   5 2018      8  S30
## 4     5   7 2018     10   S8
## 5     6   9 2018     15  S11</code></pre>
<pre><code>## [1] 2 3 4 5 6</code></pre>
<p>Note this last line: the <code>[,1]</code> says “keep all the rows, but take only the first column”.</p>
<p>Here is another example:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="ch1.html#cb64-1"></a><span class="co"># show m1, then subset the 1st, 2nd, and 4th rows and every column</span></span>
<span id="cb64-2"><a href="ch1.html#cb64-2"></a>m1; m1[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>),]</span></code></pre></div>
<pre><code>##      month day year number
## [1,]     2   1 2018      4
## [2,]     3   3 2018      7
## [3,]     4   5 2018      8
## [4,]     5   7 2018     10
## [5,]     6   9 2018     15</code></pre>
<pre><code>##      month day year number
## [1,]     2   1 2018      4
## [2,]     3   3 2018      7
## [3,]     5   7 2018     10</code></pre>
<p>Notice how you can pass a vector of row indices here to exclude the 3<sup>rd</sup> and 5<sup>th</sup> rows.</p>
<p><strong>2. By name</strong> – This method allows you to pull out a specific column of data based on what the column name is. Of course, the column must have a name first. The name method uses the <code>$</code> operator:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="ch1.html#cb67-1"></a>df1<span class="op">$</span>month</span></code></pre></div>
<pre><code>## [1] 2 3 4 5 6</code></pre>
<p>You can combine these two methods:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="ch1.html#cb69-1"></a>df1<span class="op">$</span>month[<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="ch1.html#cb71-1"></a><span class="co"># or</span></span>
<span id="cb71-2"><a href="ch1.html#cb71-2"></a>df1[,<span class="kw">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>)]</span></code></pre></div>
<pre><code>##   year month
## 1 2018     2
## 2 2018     3
## 3 2018     4
## 4 2018     5
## 5 2018     6</code></pre>
<p>The <code>$</code> method is useful because it can be used to add columns to a data frame:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="ch1.html#cb73-1"></a>df1<span class="op">$</span>dm =<span class="st"> </span>df1<span class="op">$</span>day <span class="op">+</span><span class="st"> </span>df1<span class="op">$</span>month; df1</span></code></pre></div>
<pre><code>##   month day year number pond dm
## 1     2   1 2018      4  F11  3
## 2     3   3 2018      7  S28  6
## 3     4   5 2018      8  S30  9
## 4     5   7 2018     10   S8 12
## 5     6   9 2018     15  S11 15</code></pre>
<ol start="3" style="list-style-type: decimal">
<li><strong>Logical Subsetting</strong> – This is perhaps the most flexible method, but requires more explaining. It is described in Section <a href="ch1.html#logsub">1.11</a>.</li>
</ol>
<hr />
</div>
<div id="exercise-1a" class="section level2 unnumbered">
<h2>Exercise 1A</h2>
<p>Take a break to apply what you’ve learned so far to enter the data found in Table <a href="ch1.html#tab:ex-1-table-html">1.1</a> into R by hand and do some basic data subsets.</p>
<p><em>The solutions to this exercise are found at the end of this book (<a href="exercise-solutions.html#ex1a-answers">here</a>). You are <strong>strongly recommended</strong> to make a good attempt at completing this exercise on your own and only look at the solutions when you are truly stumped.</em></p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:ex-1-table-html">Table 1.1: </span>The table you should enter in to R by hand for Exercise 1A
</caption>
<thead>
<tr>
<th style="text-align:left;">
Lake
</th>
<th style="text-align:right;">
Area
</th>
<th style="text-align:right;">
Time
</th>
<th style="text-align:right;">
Fish
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;width: 5em; ">
Big
</td>
<td style="text-align:right;width: 5em; ">
100
</td>
<td style="text-align:right;width: 5em; ">
1000
</td>
<td style="text-align:right;width: 5em; ">
643
</td>
</tr>
<tr>
<td style="text-align:left;width: 5em; ">
Small
</td>
<td style="text-align:right;width: 5em; ">
25
</td>
<td style="text-align:right;width: 5em; ">
1200
</td>
<td style="text-align:right;width: 5em; ">
203
</td>
</tr>
<tr>
<td style="text-align:left;width: 5em; ">
Square
</td>
<td style="text-align:right;width: 5em; ">
45
</td>
<td style="text-align:right;width: 5em; ">
1400
</td>
<td style="text-align:right;width: 5em; ">
109
</td>
</tr>
<tr>
<td style="text-align:left;width: 5em; ">
Circle
</td>
<td style="text-align:right;width: 5em; ">
30
</td>
<td style="text-align:right;width: 5em; ">
1600
</td>
<td style="text-align:right;width: 5em; ">
15
</td>
</tr>
</tbody>
</table>
<ol style="list-style-type: decimal">
<li>Create a new file in your working directory called <code>Ex_1A.R</code>.</li>
<li>Enter these data into vectors. Call the vectors whatever you would like. Should you enter the data as vectors by rows, or by columns? (<em>Hint: remember the properties of vectors</em>).</li>
<li>Combine your vectors into a data frame. Why should you use a data frame instead of a matrix?</li>
<li>Subset all of the data from Small Lake.</li>
<li>Subset the area for all of the lakes.</li>
<li>Subset the number of fish for Big and Square lakes.</li>
<li>You realize that you sampled 209 fish at Square Lake, not 109. Fix the mistake. There are two ways to do this, can you think of them both? Which do you think is better?</li>
<li>Save your script. Close R and re-open your script to see that it was saved.</li>
</ol>
<hr />
</div>
<div id="read" class="section level2">
<h2><span class="header-section-number">1.8</span> Read External Data Files</h2>
<p>It is rare that you will enter data by hand as you did in Exercise 1A. Often, you have a data set that you wish to analyze or manipulate that is stored in a spreadsheet. R has several ways to read information from data files and in this book, you will be using a common and simple method: reading in <code>.csv</code> files. <code>.csv</code> files are data files that separate columns with commas<a href="exercise-solutions.html#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a>. If your data are in a Microsoft Excel spreadsheet, you can save your spreadsheet file as a <code>.csv</code> file (<em>File &gt; Save As &gt; Save as Type&gt; CSV (Comma Delimited)</em>). Several dialog boxes will open asking if you are sure you want to save it as a <code>.csv</code> file.</p>
<p>The syntax for reading in a <code>.csv</code> file is:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="ch1.html#cb75-1"></a>dat =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;Path/To/FileName.csv&quot;</span>)</span></code></pre></div>
<p>Make sure your working directory is set to the location of your current file, which should be in the location <code>C:/Users/YOU/Documents/R-Book/Chapter 1</code>. According to the <a href="index.html#data-sets">instructions</a> on acquiring the data, you should have placed all of the data files for this book (downloaded from the <a href="">GitHub repository</a>) in the location <code>C:/Users/YOU/Documents/R-Book/Data</code>. If you have done this already and your working directory is set to the location of the <code>Ch1.R</code> script, you can simply run:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="ch1.html#cb76-1"></a>dat =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;../Data/streams.csv&quot;</span>)</span></code></pre></div>
<p>The <code>../</code> tells R to look up one directory from the working directory for a folder called <code>Data</code>, then within that, look for a file called <code>streams.csv</code>.</p>
<p>If you do not get an error, congratulations! However, if you get an error that looks like this:</p>
<pre><code>## Warning in file(file, &quot;rt&quot;): cannot open file &#39;streams.csv&#39;: No such file
## or directory</code></pre>
<pre><code>## Error in file(file, &quot;rt&quot;): cannot open the connection</code></pre>
<p>then fear not. This must be among the most common errors encountered by R users world-wide. It simply means the file you told R to look for doesn’t exist where you told R to find it. Here is a trouble-shooting guide to this error:</p>
<ol style="list-style-type: decimal">
<li>The exact case and spelling matters, as do the quotes and <code>.csv</code> at the end. Ensure the file name is typed correctly.</li>
<li>Check what files are in the path you are specifying: run <code>dir("../Data")</code>. This will return a vector with the names of the files located in the <code>Data</code> directory (which is one folder up from your working directory). Is the file you told R was there truly in there? Is your working directory set to where you thought it was?</li>
</ol>
<p>A simpler method is to put the data file in your working directory, in which case it can be read into R using <code>dat = read.csv("streams.csv")</code>. This method is not recommended for this book, because you will be using the same data files in multiple chapters, and it will help if they are all located in the same location.</p>
<p>If you did not get any errors, then the data are in the object you named (<code>dat</code>) and that object is a data frame. Do not proceed until you are able to get <code>read.csv</code> to run successfully.</p>
<p><strong>A few things to note about reading in <code>.csv</code> files</strong>:</p>
<ul>
<li>R will assume the first row are column headers by default.</li>
<li>If there is a space in one of the header cells, a <code>"."</code> will be inserted. For example, the column header <code>Total Length</code> would become <code>Total.Length</code>.</li>
<li>R brings in <code>.csv</code> files in as data frames by default.</li>
<li>If a record (i.e., cell) is truly missing and you want R to treat it that way (i.e., as an <code>NA</code>), you have three options:
<ul>
<li>Hard code an <code>NA</code> into that cell in your <code>.csv</code> file</li>
<li>Leave that cell completely empty in your <code>.csv</code> file</li>
<li>Enter in some other character (e.g., <code>"."</code>) alone in all cells that are meant to be coded as <code>NA</code> in R and use the <code>na.strings = "."</code> argument of <code>read.csv()</code>.</li>
</ul></li>
<li>If at some point you did “Clear Contents” in Microsoft Excel to delete rows or columns from your <code>.csv</code> file, these “deleted” rows/columns will be read in as all <code>NAs</code>, which can be annoying. To remove this problem, open the <code>.csv</code> file in Excel, then highlight and <strong>delete</strong> the rows/columns in question and save the file. Read it back into R again using <code>read.csv()</code>.</li>
<li>If even a single character is found in a numeric column in <code>FileName.csv</code>, the <em>entire column</em> will be coerced to a character/factor data class after it is read in (i.e., no more math with data on that column until you remove the character). A common error is to have a <code>#VALUE!</code> record left over from an invalid Excel function result. You must remove all of these occurrences in order to use that column as numeric. Characters include anything other than a number ([0-9]) and a period when used as a decimal. None of these characters: <code>!?[]\/@#$%^&amp;*()&lt;&gt;_-+=[a-z];[A-Z]</code> should never be found in a column you wish to do math with (e.g., take the mean of that column). <strong>This is an incredibly common problem!</strong></li>
</ul>
</div>
<div id="data-summaries" class="section level2">
<h2><span class="header-section-number">1.9</span> Explore the Data Set</h2>
<p>Have a look at the data. You could just run <code>dat</code> to view the contents of the object, but it will show the whole thing, which may be undesirable if the data set is large. To view the first handful of rows, run <code>head(dat)</code> or the last handful of rows with <code>tail(dat)</code>.</p>
<p>You will now use some basic functions to explore the simulated streams data before any analysis. The <code>summary()</code> function is very useful for getting a coarse look at how R has interpreted the data frame:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="ch1.html#cb79-1"></a><span class="kw">summary</span>(dat)</span></code></pre></div>
<pre><code>##        state    stream_width        flow       
##  Alabama  :5   Min.   :17.65   Min.   : 28.75  
##  Florida  :5   1st Qu.:46.09   1st Qu.: 65.50  
##  Georgia  :5   Median :61.80   Median : 95.64  
##  Tennessee:5   Mean   :60.88   Mean   : 91.49  
##                3rd Qu.:79.34   3rd Qu.:120.55  
##                Max.   :94.65   Max.   :149.54  
##                                NA&#39;s   :1</code></pre>
<p>You can see the spread of the numeric data and see the different levels of the factor (<code>state</code>) as well as how many records belong to each level. Note that there is one <code>NA</code> in the variable called <code>flow</code>.</p>
<p>To count the number of elements in a variable (or any vector), remember the <code>length()</code> function:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="ch1.html#cb81-1"></a><span class="kw">length</span>(dat<span class="op">$</span>stream_width)</span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<p>Note that R counts missing values as elements as well:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="ch1.html#cb83-1"></a><span class="kw">length</span>(dat<span class="op">$</span>flow)</span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<p>To get the dimensions of an object with more than one dimension (i.e., a data frame or matrix) you can use the <code>dim()</code> function. This returns a vector with two elements: the first number is the number of rows and the second is the number of columns. If you only want one of these, use the <code>nrow()</code> or <code>ncol()</code> functions (but remember, only for objects with more than one dimension; vectors don’t have rows or columns!).</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="ch1.html#cb85-1"></a><span class="kw">dim</span>(dat); <span class="kw">nrow</span>(dat); <span class="kw">ncol</span>(dat)</span></code></pre></div>
<pre><code>## [1] 20  3</code></pre>
<pre><code>## [1] 20</code></pre>
<pre><code>## [1] 3</code></pre>
<p>You can extract the names of the variables (i.e., columns) in the data frame using <code>colnames()</code>:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="ch1.html#cb89-1"></a><span class="kw">colnames</span>(dat)</span></code></pre></div>
<pre><code>## [1] &quot;state&quot;        &quot;stream_width&quot; &quot;flow&quot;</code></pre>
<p>Calculate the mean of all the <code>stream_width</code> records:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="ch1.html#cb91-1"></a><span class="kw">mean</span>(dat<span class="op">$</span>stream_width)</span></code></pre></div>
<pre><code>## [1] 60.8845</code></pre>
<p>Calculate the mean of all of the <code>flow</code> records:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="ch1.html#cb93-1"></a><span class="kw">mean</span>(dat<span class="op">$</span>flow)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p><code>mean()</code> returned an <code>NA</code> because there is an <code>NA</code> in the data for this variable. The way to tell R to ignore this <code>NA</code> is by including the argument <code>na.rm = TRUE</code> in the <code>mean()</code> function (separate arguments are always separated by commas). This is a <strong>logical</strong> argument, meaning that it asks a question. It says “do you want to remove <code>NAs</code> before calculating the mean?” <code>TRUE</code> means “yes” and <code>FALSE</code> means “no.” <code>TRUE</code> and <code>FALSE</code> can be abbreviated as <code>T</code> and <code>F</code>, respectively. Many of R’s functions have the <code>na.rm</code> argument (e.g. <code>mean()</code>, <code>sd()</code>, <code>var()</code>, <code>min()</code>, <code>max()</code>, <code>sum()</code>, etc. - most anything that collapses a vector into one number).</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="ch1.html#cb95-1"></a><span class="kw">mean</span>(dat<span class="op">$</span>flow, <span class="dt">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 91.49053</code></pre>
<p>which is the same as (i.e., the definition of the mean with the <code>NA</code> removed):</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="ch1.html#cb97-1"></a><span class="kw">sum</span>(dat<span class="op">$</span>flow, <span class="dt">na.rm =</span> T)<span class="op">/</span>(<span class="kw">nrow</span>(dat) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 91.49053</code></pre>
<p>What if you need to apply a function to more than one variable at a time? One of the easiest ways to do this (though as with most things in R, there are many) is by using the <code>apply()</code> function. This function applies the same summary function to individual subsets of a data object at a time then returns the individual summaries all at once:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="ch1.html#cb99-1"></a><span class="kw">apply</span>(dat[,<span class="kw">c</span>(<span class="st">&quot;stream_width&quot;</span>, <span class="st">&quot;flow&quot;</span>)], <span class="dv">2</span>, <span class="dt">FUN =</span> var, <span class="dt">na.rm =</span> T)</span></code></pre></div>
<pre><code>## stream_width         flow 
##     581.1693    1337.3853</code></pre>
<p>The first argument is the data object to which you want to apply the function. The second argument (the number <code>2</code>) specifies that you want to apply the function to columns, <code>1</code> would tell R to apply it to rows. The <code>FUN</code> argument specifies what function you wish to apply to each of the columns; here you are calculating the variance which takes the <code>na.rm = T</code> argument. This use of <code>apply()</code> alone is very powerful and can help you get around having to write the dreaded <code>for()</code> loop (introduced in Chapter <a href="ch4.html#ch4">4</a>).</p>
<p>There is a whole family of <code>-apply()</code> functions, the base <code>apply()</code> is the most basic but a more sophisticated one is <code>tapply()</code>, which applies a function based on some grouping variable (a factor). Calculate the mean stream width <strong>separated by state</strong>:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="ch1.html#cb101-1"></a><span class="kw">tapply</span>(dat<span class="op">$</span>stream_width, dat<span class="op">$</span>state, mean)</span></code></pre></div>
<pre><code>##   Alabama   Florida   Georgia Tennessee 
##    53.664    63.588    54.996    71.290</code></pre>
<p>The first argument is the variable to which you want to apply the <code>mean</code> function, the second is the grouping variable, and the third is what function you wish to apply. Try to commit this command to memory given this is a pretty common task.</p>
<p>If you want a data frame as output, you can use the <code>aggregate</code> function to do the same thing:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="ch1.html#cb103-1"></a><span class="kw">aggregate</span>(dat<span class="op">$</span>stream_width, <span class="dt">by =</span> <span class="kw">list</span>(<span class="dt">state =</span> dat<span class="op">$</span>state), mean)</span></code></pre></div>
<pre><code>##       state      x
## 1   Alabama 53.664
## 2   Florida 63.588
## 3   Georgia 54.996
## 4 Tennessee 71.290</code></pre>
</div>
<div id="logicalboolean-operators" class="section level2">
<h2><span class="header-section-number">1.10</span> Logical/Boolean Operators</h2>
<p>To be an efficient and capable programmer in any language, you will need to become familiar with how to implement numerical logic, i.e., the Boolean operators. These are very useful because they always return a <code>TRUE</code> or a <code>FALSE</code>, off of which program-based decisions can be made (e.g., whether to operate a given subroutine, whether to keep certain rows, whether to print the output, etc.).</p>
<p>Define a simple object: <code>x = 5</code> . Note that this will write over what was previously stored in the object <code>x</code>. Suppose you want to ask some questions of the new object <code>x</code> and have the answer printed to the console as a <code>TRUE</code> for “yes” and a <code>FALSE</code> for “no”. Below are the common Boolean operators and their usage in R.</p>
<div id="equality" class="section level4 unnumbered">
<h4>Equality</h4>
<p>To ask if <code>x</code> is exactly equal to 5, you run:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="ch1.html#cb105-1"></a>x <span class="op">==</span><span class="st"> </span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Note the use of the double <code>==</code> to denote equality as opposed to the single <code>=</code> as used in assignment (e.g., <code>x = 5</code>) or in argument specification (e.g., <code>mean(dat$flow, na.rm = T)</code>).</p>
</div>
<div id="inequalities" class="section level4 unnumbered">
<h4>Inequalities</h4>
<p>To ask if <code>x</code> is not equal to 5, you run:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="ch1.html#cb107-1"></a>x <span class="op">!=</span><span class="st"> </span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>The <code>!</code> is the logical <strong>not</strong> in R, and can be used to flip the direction of any <code>T</code> to a <code>F</code> or <em>vice versa</em>.</p>
<p>To ask if <code>x</code> is less than 5, you run:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="ch1.html#cb109-1"></a>x <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>To ask if <code>x</code> is less than <em>or equal to</em> 5, you run:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="ch1.html#cb111-1"></a>x <span class="op">&lt;=</span><span class="st"> </span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Greater than works the same way, though with the <code>&gt;</code> symbol replaced.</p>
</div>
<div id="in" class="section level4 unnumbered">
<h4>In</h4>
<p>Suppose you want to ask which elements of one vector are also found within another vector:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="ch1.html#cb113-1"></a>y =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb113-2"><a href="ch1.html#cb113-2"></a>x <span class="op">%in%</span><span class="st"> </span>y</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="ch1.html#cb115-1"></a><span class="co"># or</span></span>
<span id="cb115-2"><a href="ch1.html#cb115-2"></a>y =<span class="st"> </span><span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>)</span>
<span id="cb115-3"><a href="ch1.html#cb115-3"></a>x <span class="op">%in%</span><span class="st"> </span>y</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="ch1.html#cb117-1"></a><span class="co"># or</span></span>
<span id="cb117-2"><a href="ch1.html#cb117-2"></a>y <span class="op">%in%</span><span class="st"> </span>x</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE</code></pre>
<p><code>%in%</code> is a very useful operator in R that is not one of the traditional Boolean operators.</p>
</div>
<div id="and" class="section level4 unnumbered">
<h4>And</h4>
<p>Suppose you have two conditions, and you want to know if <strong>both are met</strong>. For this you would use <strong>and</strong> by running:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="ch1.html#cb119-1"></a>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span> <span class="op">&amp;</span><span class="st"> </span>x <span class="op">&lt;</span><span class="st"> </span><span class="dv">6</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>which asks if <code>x</code> is between 4 and 6.</p>
</div>
<div id="or" class="section level4 unnumbered">
<h4>Or</h4>
<p>Suppose you have two conditions, and you want to know if <strong>either are met</strong>. For this you would use <strong>or</strong> by running:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="ch1.html#cb121-1"></a>x <span class="op">&lt;=</span><span class="st"> </span><span class="dv">5</span> <span class="op">|</span><span class="st"> </span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>which asks if <code>x</code> is less than or equal to 5 <strong>or</strong> greater than 5 - you would be hard-pressed to find a real number that did not meet these conditions!</p>
</div>
</div>
<div id="logsub" class="section level2">
<h2><span class="header-section-number">1.11</span> Logical Subsetting</h2>
<p>A critical use of logical/Boolean operators is in the subsetting of data objects. You can use a logical vector (i.e., one made of only <code>TRUE</code> and <code>FALSE</code> elements) to tell R to extract only those elements corresponding to the <code>TRUE</code> records. For example:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="ch1.html#cb123-1"></a><span class="co"># here&#39;s logical vector: TRUE everywhere condition met</span></span>
<span id="cb123-2"><a href="ch1.html#cb123-2"></a>dat<span class="op">$</span>stream_width <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span></span></code></pre></div>
<pre><code>##  [1]  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE FALSE
## [12] FALSE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="ch1.html#cb125-1"></a><span class="co"># insert it to see only the flows for the TRUE elmements</span></span>
<span id="cb125-2"><a href="ch1.html#cb125-2"></a>dat<span class="op">$</span>flow[dat<span class="op">$</span>stream_width <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span>]</span></code></pre></div>
<pre><code>##  [1] 120.48 123.78  95.64  95.82 120.06 135.63 120.61 111.34 149.54 131.22</code></pre>
<p>gives all of the <code>flow</code> values for which <code>stream_width</code> is greater than 60.</p>
<p>To extract all of the data from Alabama, you would run:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="ch1.html#cb127-1"></a>dat[dat<span class="op">$</span>state <span class="op">==</span><span class="st"> &quot;Alabama&quot;</span>,]</span></code></pre></div>
<pre><code>##     state stream_width   flow
## 1 Alabama        81.68 120.48
## 2 Alabama        57.76  85.90
## 3 Alabama        48.32  73.38
## 4 Alabama        31.63  46.55
## 5 Alabama        48.93  80.91</code></pre>
<p>To exclude all of the data from Alabama, you would run:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="ch1.html#cb129-1"></a>dat[dat<span class="op">$</span>state <span class="op">!=</span><span class="st"> &quot;Alabama&quot;</span>,]</span></code></pre></div>
<p>You will be frequently revisiting this skill throughout the workshop.</p>
</div>
<div id="if-else-and-ifelse" class="section level2">
<h2><span class="header-section-number">1.12</span> <code>if()</code>, <code>else</code>, and <code>ifelse()</code></h2>
<p>You can tell R to do something if the result of a question is <code>TRUE</code>. This is a typical if-then statement:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="ch1.html#cb130-1"></a><span class="cf">if</span> (x <span class="op">==</span><span class="st"> </span><span class="dv">5</span>) <span class="kw">print</span>(<span class="st">&quot;x is equal to 5&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;x is equal to 5&quot;</code></pre>
<p>This says “if <code>x</code> equals 5, then print the phrase ‘x is equal to 5’ to the console”. If the logical returns a <code>FALSE</code>, then this command does nothing. To see this, change the <code>==</code> to a <code>!=</code> and re-run:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="ch1.html#cb132-1"></a><span class="cf">if</span> (x <span class="op">!=</span><span class="st"> </span><span class="dv">5</span>) <span class="kw">print</span>(<span class="st">&quot;x is equal to 5&quot;</span>)</span></code></pre></div>
<p>Notice that because <code>x</code> does equal 5, running this line has no effect.</p>
<p>You can tell R to do multiple things if the logical is <code>TRUE</code> by using curly braces:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="ch1.html#cb133-1"></a><span class="cf">if</span> (x <span class="op">==</span><span class="st"> </span><span class="dv">5</span>) {</span>
<span id="cb133-2"><a href="ch1.html#cb133-2"></a>  <span class="kw">print</span>(<span class="st">&quot;x is equal to 5&quot;</span>)</span>
<span id="cb133-3"><a href="ch1.html#cb133-3"></a>  <span class="kw">print</span>(<span class="st">&quot;you dummy, x is supposed to be 6&quot;</span>)</span>
<span id="cb133-4"><a href="ch1.html#cb133-4"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;x is equal to 5&quot;
## [1] &quot;you dummy, x is supposed to be 6&quot;</code></pre>
<p>You can always use curly braces to extend code across multiple lines whereas it may have been intended to go on one line.</p>
<p>If you want R to do something if the logical is <code>FALSE</code>, you would use the <code>else</code> command:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="ch1.html#cb135-1"></a><span class="cf">if</span> (x <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>) <span class="kw">print</span>(<span class="st">&quot;x is greater than 5&quot;</span>) <span class="cf">else</span> <span class="kw">print</span>(<span class="st">&quot;x is not greater than 5&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;x is not greater than 5&quot;</code></pre>
<p>Or extend this same thing to multiple lines:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="ch1.html#cb137-1"></a><span class="cf">if</span> (x <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>) {</span>
<span id="cb137-2"><a href="ch1.html#cb137-2"></a>  <span class="kw">print</span>(<span class="st">&quot;x is greater than 5&quot;</span>)</span>
<span id="cb137-3"><a href="ch1.html#cb137-3"></a>} <span class="cf">else</span> {</span>
<span id="cb137-4"><a href="ch1.html#cb137-4"></a>  <span class="kw">print</span>(<span class="st">&quot;x is not greater than 5&quot;</span>)</span>
<span id="cb137-5"><a href="ch1.html#cb137-5"></a>} </span></code></pre></div>
<p>The <code>if()</code> function is useful, but it can only respond to one question at a time. If you supply it with a vector of length greater than 1, it will give a warning:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="ch1.html#cb138-1"></a><span class="co"># vector from -5 to 5, excluding zero</span></span>
<span id="cb138-2"><a href="ch1.html#cb138-2"></a>xs =<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">5</span><span class="op">:-</span><span class="dv">1</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</span>
<span id="cb138-3"><a href="ch1.html#cb138-3"></a></span>
<span id="cb138-4"><a href="ch1.html#cb138-4"></a><span class="co"># attempt a logical decision</span></span>
<span id="cb138-5"><a href="ch1.html#cb138-5"></a><span class="cf">if</span> (xs <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>) <span class="kw">print</span>(<span class="st">&quot;negative&quot;</span>) <span class="cf">else</span> <span class="kw">print</span>(<span class="st">&quot;positive&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in if (xs &lt; 0) print(&quot;negative&quot;) else print(&quot;positive&quot;): the
## condition has length &gt; 1 and only the first element will be used</code></pre>
<pre><code>## [1] &quot;negative&quot;</code></pre>
<p>Warnings are different than errors in that something still happens, but it tells you that it might not be what you wanted, whereas an error stops R altogether. In short, this warning is telling you that you passed <code>if()</code> a logical vector with more than 1 element, and that it can only use one element so it’s picking the first one. Because the first element of <code>xs</code> is -5, <code>xs &lt; 0</code> evaluated to <code>TRUE</code>, and you got a <code>"negative"</code> printed along with the warning.</p>
<p>To respond to multiple questions at once, you must use <code>ifelse()</code>. This function is similar, but it combines the <code>if()</code> and <code>else</code> syntax into one useful function function:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="ch1.html#cb141-1"></a><span class="kw">ifelse</span>(xs <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>, <span class="st">&quot;positive&quot;</span>, <span class="st">&quot;negative&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;negative&quot; &quot;negative&quot; &quot;negative&quot; &quot;negative&quot; &quot;negative&quot; &quot;positive&quot;
##  [7] &quot;positive&quot; &quot;positive&quot; &quot;positive&quot; &quot;positive&quot;</code></pre>
<p>The syntax is <code>ifelse(condition, do_if_TRUE, do_if_FALSE)</code>. You can <code>cbind()</code> the output with <code>xs</code> to verify it worked:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="ch1.html#cb143-1"></a><span class="kw">cbind</span>(</span>
<span id="cb143-2"><a href="ch1.html#cb143-2"></a>  xs,</span>
<span id="cb143-3"><a href="ch1.html#cb143-3"></a>  <span class="kw">ifelse</span>(xs <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>, <span class="st">&quot;positive&quot;</span>, <span class="st">&quot;negative&quot;</span>)</span>
<span id="cb143-4"><a href="ch1.html#cb143-4"></a>)</span></code></pre></div>
<pre><code>##       xs             
##  [1,] &quot;-5&quot; &quot;negative&quot;
##  [2,] &quot;-4&quot; &quot;negative&quot;
##  [3,] &quot;-3&quot; &quot;negative&quot;
##  [4,] &quot;-2&quot; &quot;negative&quot;
##  [5,] &quot;-1&quot; &quot;negative&quot;
##  [6,] &quot;1&quot;  &quot;positive&quot;
##  [7,] &quot;2&quot;  &quot;positive&quot;
##  [8,] &quot;3&quot;  &quot;positive&quot;
##  [9,] &quot;4&quot;  &quot;positive&quot;
## [10,] &quot;5&quot;  &quot;positive&quot;</code></pre>
<p>Use <code>ifelse()</code> to create a new variable in <code>dat</code> that indicates whether a stream is big or small depending on whether <code>stream_width</code> is greater or less than 50:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="ch1.html#cb145-1"></a>dat<span class="op">$</span>size_cat =<span class="st"> </span><span class="kw">ifelse</span>(dat<span class="op">$</span>stream_width <span class="op">&gt;</span><span class="st"> </span><span class="dv">50</span>, <span class="st">&quot;big&quot;</span>, <span class="st">&quot;small&quot;</span>); <span class="kw">head</span>(dat)</span></code></pre></div>
<pre><code>##     state stream_width   flow size_cat
## 1 Alabama        81.68 120.48      big
## 2 Alabama        57.76  85.90      big
## 3 Alabama        48.32  73.38    small
## 4 Alabama        31.63  46.55    small
## 5 Alabama        48.93  80.91    small
## 6 Georgia        39.42  57.63    small</code></pre>
<p>This says “make a new variable in the data frame <code>dat</code> called <code>size_cat</code> and assign each row a ‘big’ if <code>stream_width</code> is greater than 50 and a ‘small’ if less than 50”.</p>
<p>One neat thing about <code>ifelse()</code> is that you can nest multiple statements inside another<a href="exercise-solutions.html#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a>. What if you wanted three categories: ‘small’, ‘medium’, and ‘large’?</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="ch1.html#cb147-1"></a>dat<span class="op">$</span>size_cat_fine =<span class="st"> </span><span class="kw">ifelse</span>(dat<span class="op">$</span>stream_width <span class="op">&lt;=</span><span class="st"> </span><span class="dv">40</span>, <span class="st">&quot;small&quot;</span>,</span>
<span id="cb147-2"><a href="ch1.html#cb147-2"></a>                           <span class="kw">ifelse</span>(dat<span class="op">$</span>stream_width <span class="op">&gt;</span><span class="st"> </span><span class="dv">40</span> <span class="op">&amp;</span><span class="st"> </span>dat<span class="op">$</span>stream_width <span class="op">&lt;=</span><span class="st"> </span><span class="dv">70</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;big&quot;</span>)); <span class="kw">head</span>(dat)</span></code></pre></div>
<pre><code>##     state stream_width   flow size_cat size_cat_fine
## 1 Alabama        81.68 120.48      big           big
## 2 Alabama        57.76  85.90      big        medium
## 3 Alabama        48.32  73.38    small        medium
## 4 Alabama        31.63  46.55    small         small
## 5 Alabama        48.93  80.91    small        medium
## 6 Georgia        39.42  57.63    small         small</code></pre>
<p>If the first condition is <code>TRUE</code>, then it will give that row a “small”. If not, it will start another <code>ifelse()</code> to ask if the <code>stream_width</code> is greater than 40 <em>and</em> less than or equal to 70. If so, it will give it a “medium”, if not it will get a “big”. Not all function nesting examples are this complex, but this is a neat example. Without <code>ifelse()</code>, you would have to use as many <code>if()</code> statements as there are elements in <code>dat$stream_width</code>.</p>
</div>
<div id="writing-output-files" class="section level2">
<h2><span class="header-section-number">1.13</span> Writing Output Files</h2>
<div id="csv-files" class="section level3">
<h3><span class="header-section-number">1.13.1</span> <code>.csv</code> Files</h3>
<p>Now that you have made some new variables in your data frame, you may want to save this work in the form of a new <code>.csv</code> file. To do this, you can use the <code>write.csv</code> function:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="ch1.html#cb149-1"></a><span class="kw">write.csv</span>(dat, <span class="st">&quot;updated_streams.csv&quot;</span>, <span class="dt">row.names =</span> F)</span></code></pre></div>
<p>The first argument is the data frame (or matrix) to write, the second is what you want to call it (don’t forget the <code>.csv</code>!), and <code>row.names = F</code> tells R to not include the row names (because they are just numbers in this case). R puts the file in your working directory unless you tell it otherwise. To put it somewhere else, type in the path with the new file name at the end (e.g., <code>C:/Users/YOU/Documents/R-Book/Data/updated_streams.csv</code>.</p>
</div>
<div id="saving-r-objects" class="section level3">
<h3><span class="header-section-number">1.13.2</span> Saving R Objects</h3>
<p>If all you care about is the data frame <code>dat</code> as interpreted by R (not a share-able file like the <code>.csv</code> method), then you can save the object <code>dat</code> (in its current state) then load it in to a future R session. You can save the new data frame using:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="ch1.html#cb150-1"></a><span class="kw">save</span>(dat, <span class="dt">file =</span> <span class="st">&quot;updated_streams&quot;</span>)</span></code></pre></div>
<p>Then try removing the <code>dat</code> object from your current session (<code>rm(dat)</code>) and loading it back in using:</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="ch1.html#cb151-1"></a><span class="kw">rm</span>(dat); <span class="kw">head</span>(dat)  <span class="co"># should give error</span></span>
<span id="cb151-2"><a href="ch1.html#cb151-2"></a><span class="kw">load</span>(<span class="dt">file =</span> <span class="st">&quot;updated_streams&quot;</span>)</span>
<span id="cb151-3"><a href="ch1.html#cb151-3"></a><span class="kw">head</span>(dat) <span class="co"># should show first 6 rows</span></span></code></pre></div>
</div>
</div>
<div id="user-funcs" class="section level2">
<h2><span class="header-section-number">1.14</span> User-Defined Functions</h2>
<p>Sometimes you may want R to carry out a specific task, but there is no built-in function to do it. In these cases, you can write your own functions. Function writing makes R incredibly flexible, though you will only get a small taste of this topic here. You will see more examples in later Chapters, particularly in Chapter <a href="ch4.html#ch4">4</a>.</p>
<p>First, you must think of a name for your function (e.g., <code>myfun</code>). Then, you specify that you want the object <code>myfun()</code> to be a function by using using the <code>function()</code> function. Then, in parentheses, you specify any arguments that you want to use within the function to carry out the specific task. Open and closed curly braces specify the start and end of your function body, i.e., the code that specifies how it uses the arguments to do its job.</p>
<p>Here’s the general syntax for specifying your own function:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="ch1.html#cb152-1"></a>myfun =<span class="st"> </span><span class="cf">function</span>(arg1) {</span>
<span id="cb152-2"><a href="ch1.html#cb152-2"></a>  <span class="co"># function body goes here</span></span>
<span id="cb152-3"><a href="ch1.html#cb152-3"></a>    <span class="co"># use arg1 to do something</span></span>
<span id="cb152-4"><a href="ch1.html#cb152-4"></a>  </span>
<span id="cb152-5"><a href="ch1.html#cb152-5"></a>  <span class="co"># return something as last step</span></span>
<span id="cb152-6"><a href="ch1.html#cb152-6"></a>}</span></code></pre></div>
<p>As an example, write a general function to take any number <code>x</code> to any power <code>y</code>:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="ch1.html#cb153-1"></a>power =<span class="st"> </span><span class="cf">function</span>(x, y){</span>
<span id="cb153-2"><a href="ch1.html#cb153-2"></a>  x<span class="op">^</span>y</span>
<span id="cb153-3"><a href="ch1.html#cb153-3"></a>}</span></code></pre></div>
<p>After typing and running the function code (<code>power()</code> is an object that must be assigned), try using it:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="ch1.html#cb154-1"></a><span class="kw">power</span>(<span class="dt">x =</span> <span class="dv">5</span>, <span class="dt">y =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 125</code></pre>
<p>Remember, you can nest or embed functions:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="ch1.html#cb156-1"></a><span class="kw">power</span>(<span class="kw">power</span>(<span class="dv">5</span>,<span class="dv">2</span>),<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 625</code></pre>
<p>This is the equivalent of <span class="math inline">\((5^2)^2\)</span>.</p>
<hr />
</div>
<div id="ex1b" class="section level2 unnumbered">
<h2>Exercise 1B</h2>
<p>In this exercise, you will be using what you learned in Chapter 1 to summarize data from a hypothetical pond experiment.</p>
<p>Pretend that you added nutrients to mesocosoms and counted the densities of four different zooplankton taxa. In this experiment, there were two ponds, two treatments per pond, and five replicates of each treatment. The data are located in the data file <code>ponds.csv</code> (see the <a href="index.html#data-sets">instructions</a> on acquiring and organizing the data files for this book. There is one error in the data set. After you download the data and place it in the appropriate directory, make sure you open this file and fix it <em>before</em> you bring it into R. Refer back to the information about reading in data (Section <a href="ch1.html#read">1.8</a>) to make sure you find the error.</p>
<p>Create a new R script in your working directory for this chapter called <code>Ex1B.R</code> and use that script to complete this exercise.</p>
<p><em>The solutions to this exercise are found at the end of this book (<a href="exercise-solutions.html#ex1b-answers">here</a>). You are <strong>strongly recommended</strong> to make a good attempt at completing this exercise on your own and only look at the solutions when you are truly stumped.</em></p>
<ol style="list-style-type: decimal">
<li>Read in the data to R and assign it to an object.</li>
<li>Calculate some basic summary statistics of your data using the <code>summary()</code> function.</li>
<li>Calculate the mean chlorophyll <em>a</em> for each pond (<em>Hint: pond is a grouping variable</em>)</li>
<li>Calculate the mean number of <em>Chaoborus</em> for each treatment in each pond using <code>tapply()</code>. (<em>Hint: You can group by two variables with:</em> <code>tapply(dat$var, list(dat$grp1, dat$grp2), fun)</code>.</li>
<li>Use the more general <code>apply()</code> function to calculate the variance for each zooplankton taxa found only in pond S-28.</li>
<li>Create a new variable called <code>prod</code> in the data frame that represents the quantity of chlorophyll <em>a</em> in each replicate. If the chlorophyll <em>a</em> in the replicate is greater than 30 give it a “high”, otherwise give it a “low”. (<em>Hint: are you asking R to respond to one question or multiple questions? How should this change the strategy you use?</em>)</li>
</ol>
<div id="exercise-1b-bonus" class="section level3 unnumbered">
<h3>Exercise 1B Bonus</h3>
<ol style="list-style-type: decimal">
<li>Use <code>?table</code> to figure out how you can use <code>table()</code> to count how many observations of high and low there were in each treatment (<em>Hint: <code>table</code> will have only two arguments.</em>).</li>
<li>Create a new function called <code>product()</code> that multiplies any two numbers you specify.</li>
<li>Modify your function to print a message to the console and return the value <code>if()</code> it meets a condition and to print another message and not return the value if it doesn’t.</li>
</ol>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-adv-r-cite">
<p>Wickham, Hadley. 2015. <em>Advanced R</em>. 2nd ed. Boca Raton, Florida: Chapman; Hall/CRC. <a href="https://adv-r.hadley.nz/">https://adv-r.hadley.nz/</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ch2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["au-r-workshop.docx"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
